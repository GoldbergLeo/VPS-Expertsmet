{% load static %}

<footer class="footer">
    <div class="wrapper">
        <!-- –ë–ª–æ–∫ —Å —Ñ–æ—Ä–º–æ–π –∑–∞–ø—Ä–æ—Å–∞ –ö–ü -->
        <div class="footer__cta">
            <div class="footer__cta-content">
                <h3 class="footer__cta-title">–ù—É–∂–Ω–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–º–µ—Ç–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è?</h3>
                <p class="footer__cta-subtitle">–ü–æ–ª—É—á–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –≤
                    —Ç–µ—á–µ–Ω–∏–µ 2 —á–∞—Å–æ–≤</p>
            </div>
            <form class="footer__cta-form">
                <div class="footer__cta-input-group">
                    <span class="footer__cta-input-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path
                                d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z">
                            </path>
                        </svg>
                    </span>
                    <input type="tel" class="footer__cta-input" placeholder="–í–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω" required>
                </div>
                <button type="submit" class="footer__cta-button">
                    <span>–ü–æ–ª—É—á–∏—Ç—å –ö–ü</span>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                        <polyline points="12 5 19 12 12 19"></polyline>
                    </svg>
                </button>
            </form>
            <div class="footer__cta-guarantee">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
                <span>–û—Ç–≤–µ—á–∞–µ–º –≤ —Ç–µ—á–µ–Ω–∏–µ 30 –º–∏–Ω—É—Ç –≤ —Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è</span>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å —Ñ—É—Ç–µ—Ä–∞ -->
        <div class="footer__main">
            <!-- –ö–æ–ª–æ–Ω–∫–∞ —Å –ª–æ–≥–æ—Ç–∏–ø–æ–º –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫–æ–º–ø–∞–Ω–∏–∏ -->
            <div class="footer__column footer__column--brand">
                <div class="footer__logo-block">
                    <img class="footer__logo" src="{% static 'main/img/logo.png' %}" alt="–õ–æ–≥–æ—Ç–∏–ø EXPERTsmet">
                    <div class="footer__brand">
                        <p class="footer__brand-subtitle">–¶–µ–Ω—Ç—Ä —Å–º–µ—Ç–Ω–æ–≥–æ –¥–µ–ª–∞ –∏ —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã</p>
                    </div>
                </div>

                <!-- –ë–ª–æ–∫ —Å –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞–º–∏ -->
                <ul class="footer__benefits">
                    <li class="footer__benefit">
                        <div class="footer__benefit-icon-wrap">
                            <svg class="footer__benefit-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="20 6 9 17 4 12"></polyline>
                            </svg>
                        </div>
                        <span>–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã —Å –∫—Ä—É–ø–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏</span>
                    </li>
                    <li class="footer__benefit">
                        <div class="footer__benefit-icon-wrap">
                            <svg class="footer__benefit-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="20 6 9 17 4 12"></polyline>
                            </svg>
                        </div>
                        <span>–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ä–∞—Å—Ü–µ–Ω–∫–∏ –∏ –Ω–æ—Ä–º–∞—Ç–∏–≤—ã</span>
                    </li>
                    <li class="footer__benefit">
                        <div class="footer__benefit-icon-wrap">
                            <svg class="footer__benefit-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="20 6 9 17 4 12"></polyline>
                            </svg>
                        </div>
                        <span>–ó–∞—â–∏—Ç–∞ —Å–º–µ—Ç—ã –≤ —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–µ</span>
                    </li>
                </ul>
            </div>

            <!-- –ö–æ–ª–æ–Ω–∫–∞ —Å —É—Å–ª—É–≥–∞–º–∏ -->
            <div class="footer__column">
                <h5 class="footer__column-title">–£—Å–ª—É–≥–∏</h5>
                <ul class="footer__list">
                    <li class="footer__list-item">
                        <a href="#" class="footer__link">–°–º–µ—Ç–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</a>
                    </li>
                    <li class="footer__list-item">
                        <a href="#" class="footer__link">–≠–∫—Å–ø–µ—Ä—Ç–∏–∑–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤</a>
                    </li>
                    <li class="footer__list-item">
                        <a href="#" class="footer__link">–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏</a>
                    </li>
                    <li class="footer__list-item">
                        <a href="#" class="footer__link">–≠–∫—Å–ø–µ—Ä—Ç–∏–∑–∞ —Å–º–µ—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏</a>
                    </li>
                    <li class="footer__list-item">
                        <a href="#" class="footer__link">–°–º–µ—Ç–Ω—ã–π –∞—É—Ç—Å–æ—Ä—Å–∏–Ω–≥</a>
                    </li>
                </ul>
            </div>

            <!-- –ö–æ–ª–æ–Ω–∫–∞ —Å –ø–æ–ª–µ–∑–Ω—ã–º–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏ -->
            <div class="footer__column">
                <h5 class="footer__column-title">–ü–æ–ª–µ–∑–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã</h5>
                <ul class="footer__list">
                    <li class="footer__list-item">
                        <a href="#" class="footer__link">–û–±—Ä–∞–∑—Ü—ã —Å–º–µ—Ç –∏ –ö–°-2</a>
                    </li>
                    <li class="footer__list-item">
                        <a href="#" class="footer__link">–ù–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è –±–∞–∑–∞ –§–°–ù–ë 2022</a>
                    </li>
                    <li class="footer__list-item">
                        <a href="#calculator" class="footer__link">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–º–µ—Ç–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏</a>
                    </li>
                    <li class="footer__list-item">
                        <a href="#" class="footer__link">–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã</a>
                    </li>
                    <li class="footer__list-item">
                        <a href="https://t.me/expertsmet" class="footer__link">–ë–ª–æ–≥ –æ —Å–º–µ—Ç–Ω–æ–º –¥–µ–ª–µ</a>
                    </li>
                </ul>
            </div>

            <!-- –ö–æ–ª–æ–Ω–∫–∞ —Å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ -->
            <div class="footer__column">
                <h5 class="footer__column-title">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h5>
                
                <!-- –ê–¥—Ä–µ—Å -->
                <div class="footer__address">
                    <svg class="footer__address-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                        <circle cx="12" cy="10" r="3"></circle>
                    </svg>
                    <div>
                        <p class="footer__address-text">
                            {% if current_city and current_city.address %}{{ current_city.address }}{% else %}–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –®–µ–ª–µ–ø–∏—Ö–∏–Ω—Å–∫–∞—è –Ω–∞–±–µ—Ä–µ–∂–Ω–∞—è, –¥.34 –∫.6{% endif %}
                        </p>
                        <a href="#" class="footer__map-link" onclick="openMap()">
                            <span>–û—Ç–∫—Ä—ã—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ</span>
                            <svg class="footer__map-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polygon points="7 10 12 15 17 10"></polygon>
                            </svg>
                        </a>
                    </div>
                </div>

                <!-- –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                <div class="footer__contact-info">
                    <div class="footer__contact-item footer__contact-item--phone">
                        <svg class="footer__contact-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path
                                d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z">
                            </path>
                        </svg>
                        <a href="tel:88003008772" class="footer__contact-link">8 (800) 300 87 72</a>
                    </div>
                    <div class="footer__contact-item footer__contact-item--email">
                        <svg class="footer__contact-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z">
                            </path>
                            <polyline points="22,6 12,13 2,6"></polyline>
                        </svg>
                        <a href="mailto:{% if current_city and current_city.email %}{{ current_city.email }}{% else %}mail@expertsmet.ru{% endif %}" class="footer__contact-link">
                            {% if current_city and current_city.email %}{{ current_city.email }}{% else %}mail@expertsmet.ru{% endif %}
                        </a>
                    </div>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∏ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–≤ -->
                <div class="footer__messenger-buttons">
                    <a href="https://wa.me/+79175654616"
                        class="footer__messenger-button footer__messenger-button--whatsapp">
                        <div class="footer__messenger-icon-wrap">
                            <svg class="footer__messenger-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path
                                    d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
                                </path>
                            </svg>
                        </div>
                        <span>–ù–∞–ø–∏—Å–∞—Ç—å –≤ WhatsApp</span>
                    </a>
                    <a href="https://t.me/expertsmet"
                        class="footer__messenger-button footer__messenger-button--telegram">
                        <div class="footer__messenger-icon-wrap">
                            <svg class="footer__messenger-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path
                                    d="M21.198 2.433a2.242 2.242 0 0 0-1.022.215l-17.03 6.698a2.25 2.25 0 0 0-.134 4.108l3.22 1.139v5.173c0 1.064 1.1 1.737 1.99 1.219l2.558-1.486 3.9 2.817c.51.372 1.162.573 1.833.45.579-.105 1.096-.466 1.428-.991.227-.358.367-.787.386-1.254l1.248-13.387a2.247 2.247 0 0 0-1.956-2.471">
                                </path>
                            </svg>
                        </div>
                        <span>–ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram</span>
                    </a>
                </div>

                <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
                <div class="footer__quick-actions">
                    <a href="#" class="footer__quick-action" id="callbackButton">
                        <svg class="footer__quick-action-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path
                                d="M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 19.92z">
                            </path>
                        </svg>
                        <span>–ó–∞–∫–∞–∑–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—ã–π –∑–≤–æ–Ω–æ–∫</span>
                    </a>
                    <a href="#" class="footer__quick-action" id="askExpertButton">
                        <svg class="footer__quick-action-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                        </svg>
                        <span>–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å —ç–∫—Å–ø–µ—Ä—Ç—É</span>
                    </a>
                </div>
            </div>
        </div>

        <!-- –ù–∏–∂–Ω—è—è —á–∞—Å—Ç—å —Ñ—É—Ç–µ—Ä–∞ -->
        <div class="footer__bottom">
            <div class="footer__bottom-content">
                <div class="footer__copyright">
                    <p class="footer__copyright-text">¬© 2025 EXPERTsmet. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
                    <div class="footer__legal-links">
                        <a href="https://expertsmet.ru/articles/politika-konfidencialnosti.html" class="footer__legal-link">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
                        <a href="#" class="footer__legal-link">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ</a>
                        <a href="#" class="footer__legal-link">–ö–∞—Ä—Ç–∞ —Å–∞–π—Ç–∞</a>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- –ü–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ –≤—ã–∑–æ–≤–∞ –º–µ–Ω—é —Å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º –¥–∏–∑–∞–π–Ω–æ–º -->
    <div class="footer__float-button" id="footerFloatButton">
        <svg class="footer__float-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path
                d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z">
            </path>
        </svg>
        <div class="footer__float-menu" id="footerFloatMenu">
            <a href="tel:88003008772" class="footer__float-item">
                <svg class="footer__float-item-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path
                        d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z">
                    </path>
                </svg>
                <span>–ü–æ–∑–≤–æ–Ω–∏—Ç—å</span>
            </a>
            <a href="https://wa.me/+79175654616" class="footer__float-item">
                <svg class="footer__float-item-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path
                        d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
                    </path>
                </svg>
                <span>WhatsApp</span>
            </a>
            <a href="https://t.me/expertsmet_ai_bot" class="footer__float-item">
                <svg class="footer__float-item-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path
                        d="M21.198 2.433a2.242 2.242 0 0 0-1.022.215l-17.03 6.698a2.25 2.25 0 0 0-.134 4.108l3.22 1.139v5.173c0 1.064 1.1 1.737 1.99 1.219l2.558-1.486 3.9 2.817c.51.372 1.162.573 1.833.45.579-.105 1.096-.466 1.428-.991.227-.358.367-.787.386-1.254l1.248-13.387a2.247 2.247 0 0 0-1.956-2.471">
                    </path>
                </svg>
                <span>Telegram</span>
            </a>
            <a href="#" class="footer__float-item" id="floatCallbackBtn">
                <svg class="footer__float-item-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path
                        d="M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 19.92z">
                    </path>
                </svg>
                <span>–û–±—Ä–∞—Ç–Ω—ã–π –∑–≤–æ–Ω–æ–∫</span>
            </a>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞ -->
    <div class="footer__modal" id="callbackModal">
        <div class="footer__modal-content">
            <button class="footer__modal-close" id="closeCallbackModal">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
            <h3 class="footer__modal-title">–ó–∞–∫–∞–∑–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—ã–π –∑–≤–æ–Ω–æ–∫</h3>
            <p class="footer__modal-subtitle">–û—Å—Ç–∞–≤—å—Ç–µ —Å–≤–æ–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã, –∏ –º—ã –ø–µ—Ä–µ–∑–≤–æ–Ω–∏–º –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è</p>
            <form class="footer__modal-form">
                <div class="footer__modal-field">
                    <label for="callbackName">–í–∞—à–µ –∏–º—è</label>
                    <input type="text" id="callbackName" placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤" required>
                </div>
                <div class="footer__modal-field">
                    <label for="callbackPhone">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
                    <input type="tel" id="callbackPhone" placeholder="+7 (___) ___-__-__" required>
                </div>
                <div class="footer__modal-field">
                    <label for="callbackTime">–£–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –∑–≤–æ–Ω–∫–∞</label>
                    <select id="callbackTime">
                        <option value="any">–í –ª—é–±–æ–µ –≤—Ä–µ–º—è</option>
                        <option value="morning">–£—Ç—Ä–æ (9:00 - 12:00)</option>
                        <option value="day">–î–µ–Ω—å (12:00 - 18:00)</option>
                        <option value="evening">–í–µ—á–µ—Ä (18:00 - 20:00)</option>
                    </select>
                </div>
                <button type="submit" class="footer__modal-button">–ó–∞–∫–∞–∑–∞—Ç—å –∑–≤–æ–Ω–æ–∫</button>
                <p class="footer__modal-note">–ù–∞–∂–∏–º–∞—è –Ω–∞ –∫–Ω–æ–ø–∫—É, –≤—ã –¥–∞–µ—Ç–µ —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</p>
            </form>
        </div>
    </div>

    <!-- –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –∫–Ω–æ–ø–∫–∞ —á–∞—Ç-–±–æ—Ç–∞ -->
    <div class="footer__chatbot-button" id="chatbotButton">
        <div class="footer__chatbot-pulse"></div>
        <svg class="footer__chatbot-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
            <path d="M14 9h.01M10 9h.01M6 9h.01"></path>
        </svg>
        <div class="footer__chatbot-text">
            <span class="footer__chatbot-main-text">üí¨ –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å —ç–∫—Å–ø–µ—Ä—Ç—É</span>
            <span class="footer__chatbot-sub-text">–ù–∞—à–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã –æ—Ç–≤–µ—Ç—è—Ç –Ω–∞ –≤—Å–µ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Å–º–µ—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏</span>
        </div>
    </div>

    <!-- –ò–°–ü–†–ê–í–õ–ï–ù–ù–û–ï –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —á–∞—Ç-–±–æ—Ç–∞ (–ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–ø—Ä–∞–≤–∞) -->
    <div class="footer__chatbot-modal" id="chatbotModal">
        <div class="footer__chatbot-container">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —á–∞—Ç–∞ -->
            <div class="footer__chatbot-header">
                <div class="footer__chatbot-header-info">
                    <div class="footer__chatbot-avatar">
                        <div class="footer__chatbot-status"></div>
                        <img src="{% static 'main/img/team_5.webp' %}" alt="–ê–Ω–Ω–∞ - –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç EXPERTsmet" class="footer__chatbot-avatar-img">
                    </div>
                    <div class="footer__chatbot-header-text">
                        <h3>–ê–Ω–Ω–∞ - –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç EXPERTsmet</h3>
                        <span class="footer__chatbot-online">üü¢ –°–µ–π—á–∞—Å –æ–Ω–ª–∞–π–Ω</span>
                        <span class="footer__chatbot-response-time">–û—Ç–≤–µ—á–∞–µ—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ –º–∏–Ω—É—Ç—ã</span>
                    </div>
                </div>
                <button class="footer__chatbot-close" id="closeChatbotModal">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            
            <!-- –û–±–ª–∞—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π -->
            <div class="footer__chatbot-messages" id="chatbotMessages">
                <div class="footer__chatbot-message footer__chatbot-message--bot">
                    <div class="footer__chatbot-message-avatar">
                        <img src="{% static 'main/img/team_5.webp' %}" alt="–ê–Ω–Ω–∞ - –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç" class="footer__chatbot-message-avatar-img">
                    </div>
                    <div class="footer__chatbot-message-content">
                        <p>–ü—Ä–∏–≤–µ—Ç! üëã –Ø –ê–Ω–Ω–∞, –ø–æ–º–æ–≥—É –≤–∞–º —Å –ª—é–±—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏ –ø–æ —Å–º–µ—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏!</p>
                        <span class="footer__chatbot-message-time">—Ç–æ–ª—å–∫–æ —á—Ç–æ</span>
                    </div>
                </div>
            </div>
            
            <!-- –ë—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã -->
            <div class="footer__chatbot-quick-replies" id="chatbotQuickReplies">
                <button class="footer__chatbot-quick-reply" data-message="üí∞ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å —Å–º–µ—Ç—ã">üí∞ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å</button>
                <button class="footer__chatbot-quick-reply" data-message="üîç –ù—É–∂–Ω–∞ —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞ —Å–º–µ—Ç—ã">üîç –≠–∫—Å–ø–µ—Ä—Ç–∏–∑–∞ —Å–º–µ—Ç—ã</button>
                <button class="footer__chatbot-quick-reply" data-message="‚è∞ –ö–∞–∫–∏–µ —Å—Ä–æ–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è?">‚è∞ –°—Ä–æ–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</button>
                <button class="footer__chatbot-quick-reply" data-message="üìû –•–æ—á—É –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º">üìû –°–≤—è–∑—å —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º</button>
            </div>
            
            <!-- –û–±–ª–∞—Å—Ç—å –≤–≤–æ–¥–∞ -->
            <div class="footer__chatbot-input-area">
                <div class="footer__chatbot-input-wrapper">
                    <input type="text" id="chatbotInput" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å..." class="footer__chatbot-input" maxlength="500">
                    <button type="button" id="chatbotSend" class="footer__chatbot-send">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="22" y1="2" x2="11" y2="13"></line>
                            <polygon points="22,2 15,22 11,13 2,9 22,2"></polygon>
                        </svg>
                    </button>
                </div>
                <div class="footer__chatbot-typing" id="chatbotTyping" style="display: none;">
                    <span></span>
                    <span></span>
                    <span></span>
                    –ê–Ω–Ω–∞ –ø–µ—á–∞—Ç–∞–µ—Ç...
                </div>
            </div>
            
            <!-- –§—É—Ç–µ—Ä —á–∞—Ç–∞ -->
            <div class="footer__chatbot-footer">
                <div class="footer__chatbot-powered">
                    <span>üîí –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —á–∞—Ç</span>
                    <span>‚Ä¢</span>
                    <span>üì± –û—Ç–≤–µ—Ç–∏–º –∑–∞ 15 —Å–µ–∫—É–Ω–¥</span>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å —Ñ–æ—Ä–º–æ–π –¥–ª—è –≤–æ–ø—Ä–æ—Å–∞ —ç–∫—Å–ø–µ—Ä—Ç—É -->
    <div class="footer__modal" id="expertModal">
        <div class="footer__modal-content">
            <button class="footer__modal-close" id="closeExpertModal">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
            <h3 class="footer__modal-title">–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å —ç–∫—Å–ø–µ—Ä—Ç—É</h3>
            <p class="footer__modal-subtitle">–ù–∞—à–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã –æ—Ç–≤–µ—Ç—è—Ç –Ω–∞ –≤—Å–µ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Å–º–µ—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏</p>
            <form class="footer__modal-form">
                <div class="footer__modal-field">
                    <label for="expertName">–í–∞—à–µ –∏–º—è</label>
                    <input type="text" id="expertName" placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤" required>
                </div>
                <div class="footer__modal-field">
                    <label for="expertEmail">Email –¥–ª—è –æ—Ç–≤–µ—Ç–∞</label>
                    <input type="email" id="expertEmail" placeholder="ivanov@example.com" required>
                </div>
                <div class="footer__modal-field">
                    <label for="expertPhone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                    <input type="tel" id="expertPhone" placeholder="+7 (___) ___-__-__">
                </div>
                <div class="footer__modal-field">
                    <label for="expertQuestion">–í–∞—à –≤–æ–ø—Ä–æ—Å</label>
                    <textarea id="expertQuestion" rows="4" placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å..." required></textarea>
                </div>
                <div class="footer__modal-field footer__modal-field--file">
                    <label for="expertFile" class="footer__modal-file-label">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
                            <polyline points="13 2 13 9 20 9"></polyline>
                        </svg>
                        <span>–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª</span>
                    </label>
                    <input type="file" id="expertFile" class="footer__modal-file">
                    <div class="footer__modal-file-info">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 10 MB</div>
                </div>
                <button type="submit" class="footer__modal-button">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å</button>
                <p class="footer__modal-note">–ù–∞–∂–∏–º–∞—è –Ω–∞ –∫–Ω–æ–ø–∫—É, –≤—ã –¥–∞–µ—Ç–µ —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</p>
            </form>
        </div>
    </div>
</footer>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // –§–æ—Ä–º–∞ –∑–∞–ø—Ä–æ—Å–∞ –ö–ü
        const ctaForm = document.querySelector('.footer__cta-form');

        if (ctaForm) {
            ctaForm.addEventListener('submit', function (e) {
                e.preventDefault();
                const phoneInput = this.querySelector('.footer__cta-input');
                const phoneValue = phoneInput.value.trim();

                if (phoneValue) {
                    // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏ AJAX-–æ—Ç–ø—Ä–∞–≤–∫—É

                    // –ò–º–∏—Ç–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
                    phoneInput.value = '';

                    // –°–æ–∑–¥–∞–µ–º –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ
                    const successMessage = document.createElement('div');
                    successMessage.classList.add('footer__cta-success');
                    successMessage.style.position = 'absolute';
                    successMessage.style.bottom = '-60px';
                    successMessage.style.left = '0';
                    successMessage.style.width = '100%';
                    successMessage.style.backgroundColor = 'rgba(255, 172, 48, 0.95)';
                    successMessage.style.color = '#1c1e25';
                    successMessage.style.padding = '10px 20px';
                    successMessage.style.borderRadius = '4px';
                    successMessage.style.textAlign = 'center';
                    successMessage.style.boxShadow = '0 8px 15px -3px rgba(0, 0, 0, 0.2)';
                    successMessage.style.zIndex = '10';
                    successMessage.style.transform = 'translateY(20px)';
                    successMessage.style.opacity = '0';
                    successMessage.style.transition = 'all 0.3s ease';
                    successMessage.innerHTML = '<svg style="display: inline-block; vertical-align: middle; width: 20px; height: 20px; margin-right: 8px; color: #1c1e25;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>–°–ø–∞—Å–∏–±–æ! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.';

                    // –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –µ—Å–ª–∏ –æ–Ω–æ –µ—Å—Ç—å
                    if (document.querySelector('.footer__cta-success')) {
                        document.querySelector('.footer__cta-success').remove();
                    }

                    ctaForm.style.position = 'relative';
                    ctaForm.appendChild(successMessage);

                    // –ê–Ω–∏–º–∏—Ä—É–µ–º –ø–æ—è–≤–ª–µ–Ω–∏–µ
                    setTimeout(() => {
                        successMessage.style.opacity = '1';
                        successMessage.style.transform = 'translateY(0)';
                    }, 10);

                    // –£–¥–∞–ª—è–µ–º —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è
                    setTimeout(() => {
                        successMessage.style.opacity = '0';
                        successMessage.style.transform = 'translateY(-20px)';
                        setTimeout(() => {
                            successMessage.remove();
                        }, 300);
                    }, 5000);
                }
            });
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
        const callbackButton = document.getElementById('callbackButton');
        const callbackModal = document.getElementById('callbackModal');
        const closeCallbackModal = document.getElementById('closeCallbackModal');

        const askExpertButton = document.getElementById('askExpertButton');
        const expertModal = document.getElementById('expertModal');
        const closeExpertModal = document.getElementById('closeExpertModal');

        const floatCallbackBtn = document.getElementById('floatCallbackBtn');

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
        function toggleModal(modal, action) {
            if (action === 'open') {
                modal.style.display = 'flex';
                setTimeout(() => {
                    modal.classList.add('active');
                }, 10);
                document.body.style.overflow = 'hidden'; // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
            } else {
                modal.classList.remove('active');
                setTimeout(() => {
                    modal.style.display = 'none';
                }, 300);
                document.body.style.overflow = ''; // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∏ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
        if (callbackButton && callbackModal && closeCallbackModal) {
            callbackButton.addEventListener('click', function (e) {
                e.preventDefault();
                toggleModal(callbackModal, 'open');
            });

            closeCallbackModal.addEventListener('click', function () {
                toggleModal(callbackModal, 'close');
            });
        }

        if (askExpertButton && expertModal && closeExpertModal) {
            askExpertButton.addEventListener('click', function (e) {
                e.preventDefault();
                toggleModal(expertModal, 'open');
            });

            closeExpertModal.addEventListener('click', function () {
                toggleModal(expertModal, 'close');
            });
        }

        if (floatCallbackBtn && callbackModal) {
            floatCallbackBtn.addEventListener('click', function (e) {
                e.preventDefault();
                toggleModal(callbackModal, 'open');
            });
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
        window.addEventListener('click', function (e) {
            if (e.target === callbackModal) {
                toggleModal(callbackModal, 'close');
            }
            if (e.target === expertModal) {
                toggleModal(expertModal, 'close');
            }
        });

        // –ú–∞—Å–∫–∞ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–∞
        const phoneInputs = document.querySelectorAll('input[type="tel"]');

        phoneInputs.forEach(input => {
            input.addEventListener('input', function (e) {
                // –£–¥–∞–ª—è–µ–º –≤—Å–µ –Ω–µ—Ü–∏—Ñ—Ä–æ–≤—ã–µ —Å–∏–º–≤–æ–ª—ã –∏–∑ –≤–≤–µ–¥–µ–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
                let value = this.value.replace(/\D/g, '');

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞—á–∞–ª–æ –Ω–æ–º–µ—Ä–∞ (–¥–ª—è –†–æ—Å—Å–∏–∏)
                if (value.startsWith('8')) {
                    value = '7' + value.substring(1);
                }
                if (!value.startsWith('7') && value.length > 0) {
                    value = '7' + value;
                }

                // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –Ω–æ–º–µ—Ä
                let formattedValue = '';
                if (value.length > 0) {
                    formattedValue = '+' + value.substring(0, 1);

                    if (value.length > 1) {
                        formattedValue += ' (' + value.substring(1, 4);
                    }

                    if (value.length > 4) {
                        formattedValue += ') ' + value.substring(4, 7);
                    }

                    if (value.length > 7) {
                        formattedValue += '-' + value.substring(7, 9);
                    }

                    if (value.length > 9) {
                        formattedValue += '-' + value.substring(9, 11);
                    }
                }

                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
                this.value = formattedValue;
            });
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
        const modalForms = document.querySelectorAll('.footer__modal-form');

        modalForms.forEach(form => {
            form.addEventListener('submit', function (e) {
                e.preventDefault();
                let isValid = true;

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
                this.querySelectorAll('[required]').forEach(field => {
                    if (!field.value.trim()) {
                        isValid = false;
                        field.classList.add('error');

                        // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ, –µ—Å–ª–∏ –µ–≥–æ –µ—â–µ –Ω–µ—Ç
                        if (!field.nextElementSibling || !field.nextElementSibling.classList.contains('error-message')) {
                            const errorMessage = document.createElement('div');
                            errorMessage.classList.add('error-message');
                            errorMessage.textContent = '–≠—Ç–æ –ø–æ–ª–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è';
                            errorMessage.style.color = '#ef4444';
                            errorMessage.style.fontSize = '12px';
                            errorMessage.style.marginTop = '4px';
                            field.insertAdjacentElement('afterend', errorMessage);
                        }
                    } else {
                        field.classList.remove('error');
                        // –£–¥–∞–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ, –µ—Å–ª–∏ –æ–Ω–æ –µ—Å—Ç—å
                        if (field.nextElementSibling && field.nextElementSibling.classList.contains('error-message')) {
                            field.nextElementSibling.remove();
                        }
                    }
                });

                // –ï—Å–ª–∏ —Ñ–æ—Ä–º–∞ –≤–∞–ª–∏–¥–Ω–∞, –∏–º–∏—Ç–∏—Ä—É–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É
                if (isValid) {
                    const submitButton = this.querySelector('button[type="submit"]');
                    const originalText = submitButton.innerHTML;

                    // –ú–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –∏ –¥–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –∑–∞–≥—Ä—É–∑–∫–∏
                    submitButton.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 18px; height: 18px; margin-right: 8px; animation: spin 1s linear infinite;"><circle cx="12" cy="12" r="10"></circle><path d="M12 6v6l4 2"></path></svg> –û—Ç–ø—Ä–∞–≤–∫–∞...';
                    submitButton.style.opacity = '0.8';
                    submitButton.disabled = true;

                    // –°—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –≤—Ä–∞—â–µ–Ω–∏—è
                    if (!document.head.querySelector('#spin-animation')) {
                        const style = document.createElement('style');
                        style.id = 'spin-animation';
                        style.textContent = `@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }`;
                        document.head.appendChild(style);
                    }

                    // –ò–º–∏—Ç–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ AJAX
                    setTimeout(() => {
                        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É
                        this.reset();

                        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–µ
                        submitButton.innerHTML = originalText;
                        submitButton.style.opacity = '1';
                        submitButton.disabled = false;

                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ
                        const modal = this.closest('.footer__modal');
                        const modalContent = modal.querySelector('.footer__modal-content');

                        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
                        const originalContent = modalContent.innerHTML;

                        // –ó–∞–º–µ–Ω—è–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
                        modalContent.innerHTML = `
                            <div style="text-align: center; padding: 20px;">
                                <svg viewBox="0 0 24 24" fill="none" stroke="#FFAC30" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 60px; height: 60px; margin: 0 auto 20px;">
                                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                    <polyline points="22 4 12 14.01 9 11.01"></polyline>
                                </svg>
                                <h3 style="color: #ffffff; font-size: 22px; margin-bottom: 10px;">–°–ø–∞—Å–∏–±–æ –∑–∞ –æ–±—Ä–∞—â–µ–Ω–∏–µ!</h3>
                                <p style="color: rgba(255, 255, 255, 0.7); font-size: 16px; margin-bottom: 30px;">–ú—ã –ø–æ–ª—É—á–∏–ª–∏ –≤–∞—à—É –∑–∞—è–≤–∫—É –∏ —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.</p>
                                <button id="closeSuccessModal" style="padding: 12px 24px; background-color: #FFAC30; border: none; border-radius: 4px; color: #1c1e25; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">–ó–∞–∫—Ä—ã—Ç—å</button>
                            </div>
                        `;

                        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è
                        document.getElementById('closeSuccessModal').addEventListener('click', function () {
                            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
                            modalContent.innerHTML = originalContent;

                            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                            toggleModal(modal, 'close');

                            // –ü–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –Ω–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
                            initializeEventHandlers();
                        });
                    }, 1500);
                }
            });

            // –£–¥–∞–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ –Ω–∞ –ø–æ–ª–µ
            form.querySelectorAll('input, textarea, select').forEach(field => {
                field.addEventListener('focus', function () {
                    this.classList.remove('error');
                    if (this.nextElementSibling && this.nextElementSibling.classList.contains('error-message')) {
                        this.nextElementSibling.remove();
                    }
                });
            });
        });

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        function initializeEventHandlers() {
            // –í—Å–µ –º–æ–¥–∞–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—ã
            document.querySelectorAll('.footer__modal-form').forEach(form => {
                form.addEventListener('submit', function (e) {
                    e.preventDefault();
                    // –õ–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤—ã—à–µ)
                });

                form.querySelectorAll('input, textarea, select').forEach(field => {
                    field.addEventListener('focus', function () {
                        this.classList.remove('error');
                        if (this.nextElementSibling && this.nextElementSibling.classList.contains('error-message')) {
                            this.nextElementSibling.remove();
                        }
                    });
                });
            });

            // –ö–Ω–æ–ø–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
            document.querySelectorAll('.footer__modal-close').forEach(button => {
                button.addEventListener('click', function () {
                    const modal = this.closest('.footer__modal');
                    toggleModal(modal, 'close');
                });
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–∞—Ä—Ç—ã
        function openMap() {
            {% if current_city and current_city.address %}
                var address = "{{ current_city.address }}";
            {% else %}
                var address = "–ú–æ—Å–∫–≤–∞, –®–µ–ª–µ–ø–∏—Ö–∏–Ω—Å–∫–∞—è –Ω–∞–±–µ—Ä–µ–∂–Ω–∞—è, 34–∫6";
            {% endif %}
            window.open('https://maps.google.com/?q=' + encodeURIComponent(address), '_blank');
        }

        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∫–∞—Ä—Ç—ã
        const mapLink = document.querySelector('.footer__map-link');
        if (mapLink) {
            mapLink.addEventListener('click', function(e) {
                e.preventDefault();
                openMap();
            });
        }
    });

    // –ß–ê–¢–ë–û–¢ –î–õ–Ø EXPERTSMET.RU

    // –û–∂–∏–¥–∞–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ DOM
    document.addEventListener('DOMContentLoaded', function() {
        console.log('ü§ñ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–∞—Ç-–±–æ—Ç–∞ EXPERTsmet...');

        // –≠–ª–µ–º–µ–Ω—Ç—ã
        const chatbotButton = document.getElementById('chatbotButton');
        const chatbotModal = document.getElementById('chatbotModal');
        const closeChatbotModal = document.getElementById('closeChatbotModal');
        const chatbotInput = document.getElementById('chatbotInput');
        const chatbotSend = document.getElementById('chatbotSend');
        const chatbotMessages = document.getElementById('chatbotMessages');
        const chatbotTyping = document.getElementById('chatbotTyping');

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        if (!chatbotButton || !chatbotModal || !closeChatbotModal || !chatbotInput || !chatbotSend || !chatbotMessages || !chatbotTyping) {
            console.error('‚ùå –ù–µ –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —á–∞—Ç–∞ –Ω–∞–π–¥–µ–Ω—ã:', {
                chatbotButton: !!chatbotButton,
                chatbotModal: !!chatbotModal,
                closeChatbotModal: !!closeChatbotModal,
                chatbotInput: !!chatbotInput,
                chatbotSend: !!chatbotSend,
                chatbotMessages: !!chatbotMessages,
                chatbotTyping: !!chatbotTyping
            });
            return;
        }

        console.log('‚úÖ –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —á–∞—Ç–∞ –Ω–∞–π–¥–µ–Ω—ã');

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        let chatbotShown = false;
        let chatbotAutoOpened = false;
        let userInteracted = false;
        let isTyping = false;
        let awaitingAIResponse = false;
        let sessionId = null;
        let firstAutoResponseGiven = false;

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        const clientUid = 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);

        // –ü–æ–ª—É—á–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        const h1 = document.querySelector('h1');
        const pageTitle = h1
          ? h1.textContent.trim()
          : '–£—Å–ª—É–≥–∏ –ø–æ —Å–º–µ—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏';

        const welcomeMessage = `–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –í–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç ¬´${pageTitle}¬ª?`;

        console.log('üìÑ –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:', pageTitle);
        console.log('üë§ Client UID:', clientUid);

        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è —á–∞—Ç-–±–æ—Ç–∞
        function toggleChatbot(action) {
            if (!chatbotModal) return;
            
            if (action === 'open') {
                chatbotModal.classList.add('active');
                document.body.style.overflow = 'hidden';
                
                // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏–∏
                if (chatbotButton) {
                    chatbotButton.classList.remove('attention', 'shake');
                }
                
                // –§–æ–∫—É—Å –Ω–∞ –ø–æ–ª–µ –≤–≤–æ–¥–∞
                setTimeout(() => {
                    if (chatbotInput) {
                        chatbotInput.focus();
                    }
                }, 400);
                
            } else if (action === 'close') {
                chatbotModal.classList.remove('active');
                document.body.style.overflow = '';
            }
        }

        // –ü–æ–∫–∞–∑ –∫–Ω–æ–ø–∫–∏ —á–∞—Ç–±–æ—Ç–∞
        function showChatbotButton() {
            if (chatbotButton && !chatbotShown) {
                chatbotButton.classList.add('show');
                chatbotShown = true;
                
                // –ü—Ä–∏–≤–ª–µ–∫–∞—é—â–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
                setTimeout(() => {
                    if (!userInteracted && chatbotButton) {
                        chatbotButton.classList.add('attention');
                    }
                }, 3000);
                
                // –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ "–≤—Å—Ç—Ä—è—Ö–∏–≤–∞–Ω–∏–µ"
                setInterval(() => {
                    if (!userInteracted && chatbotShown && chatbotButton) {
                        chatbotButton.classList.add('shake');
                        setTimeout(() => {
                            if (chatbotButton) {
                                chatbotButton.classList.remove('shake');
                            }
                        }, 600);
                    }
                }, 20000);
            }
        }

        // –ñ–¥–∞—Ç—å –æ–∫–æ–Ω—á–∞–Ω–∏—è "–ø–µ—á–∞—Ç–∏" –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
        function typeMessageWithPause(text, isUser = false, typingSpeed = 30, pauseAfter = 1000) {
            return new Promise(resolve => {
                addMessageWithTypewriter(text, isUser, typingSpeed);
                const duration = text.length * typingSpeed + pauseAfter;
                setTimeout(resolve, duration);
            });
        }

        // –ê–≤—Ç–æ–æ—Ç–∫—Ä—ã—Ç–∏–µ —á–∞—Ç-–±–æ—Ç–∞
        async function autoOpenChatbot() {
            if (!chatbotAutoOpened && !userInteracted) {
                toggleChatbot('open');
                chatbotAutoOpened = true;
                userInteracted = true;

                // 1. –ü–∞—É–∑–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
                await new Promise(r => setTimeout(r, 1200));

                // 2. –ü–µ—Ä–≤–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
                await typeMessageWithPause(welcomeMessage, false, 26, 1200);

                // 3. –ü–∞—É–∑–∞ –º–µ–∂–¥—É –ø–µ—Ä–≤—ã–º –∏ –≤—Ç–æ—Ä—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
                await new Promise(r => setTimeout(r, 1200));

                // 4. –í—Ç–æ—Ä–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (—É—Å–ª—É–≥–∏)
                await typeMessageWithPause(`üéØ –Ø –ø–æ–º–æ–≥—É –≤–∞–º —Å –ª—é–±—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏ –ø–æ —Å–º–µ—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–µ! 

üí∞ **–ù–∞—à–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ —É—Å–ª—É–≥–∏:**
üìã –°–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∏ –æ–±—ä–µ–∫—Ç–Ω—ã—Ö —Å–º–µ—Ç
üîç –≠–∫—Å–ø–µ—Ä—Ç–∏–∑–∞ —Å–º–µ—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏  
üìä –í–µ–¥–æ–º–æ—Å—Ç–∏ –æ–±—ä–µ–º–æ–≤ —Ä–∞–±–æ—Ç
‚ö° –°—Ä–æ—á–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞ 24 —á–∞—Å–∞

–ß—Ç–æ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ?`, false, 20, 700);

                firstAutoResponseGiven = true;
            }
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–æ–±—ã—á–Ω–æ–µ)
        function addMessage(text, isUser = false) {
            if (!chatbotMessages) return;
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `footer__chatbot-message ${isUser ? 'footer__chatbot-message--user' : 'footer__chatbot-message--bot'}`;
            
            const now = new Date();
            const timeString = now.toLocaleTimeString('ru-RU', {hour: '2-digit', minute: '2-digit'});
            
            if (isUser) {
                messageDiv.innerHTML = `
                    <div class="footer__chatbot-message-content">
                        <p>${text}</p>
                        <span class="footer__chatbot-message-time">${timeString}</span>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="footer__chatbot-message-avatar">
                        <img src="{% static 'main/img/team_5.webp' %}" alt="–ê–Ω–Ω–∞ - –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç" class="footer__chatbot-message-avatar-img">
                    </div>
                    <div class="footer__chatbot-message-content">
                        <p>${text}</p>
                        <span class="footer__chatbot-message-time">${timeString}</span>
                    </div>
                `;
            }
            
            chatbotMessages.appendChild(messageDiv);
            chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º –ø–µ—á–∞—Ç–∞–Ω–∏—è
        function addMessageWithTypewriter(text, isUser = false, typingSpeed = 30) {
            if (!chatbotMessages) return;
            
            // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–ø–µ—á–∞—Ç–∞–µ—Ç"
            hideTyping();
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `footer__chatbot-message ${isUser ? 'footer__chatbot-message--user' : 'footer__chatbot-message--bot'}`;
            
            const now = new Date();
            const timeString = now.toLocaleTimeString('ru-RU', {hour: '2-digit', minute: '2-digit'});
            
            if (isUser) {
                // –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–µ—á–∞—Ç–∞–Ω–∏–µ –Ω–µ –Ω—É–∂–Ω–æ
                messageDiv.innerHTML = `
                    <div class="footer__chatbot-message-content">
                        <p>${text}</p>
                        <span class="footer__chatbot-message-time">${timeString}</span>
                    </div>
                `;
                chatbotMessages.appendChild(messageDiv);
                chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
                return;
            }
            
            // –î–ª—è –±–æ—Ç–∞ —Å–æ–∑–¥–∞–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å –ø—É—Å—Ç—ã–º —Ç–µ–∫—Å—Ç–æ–º
            messageDiv.innerHTML = `
                <div class="footer__chatbot-message-avatar">
                    <img src="{% static 'main/img/team_5.webp' %}" alt="–ê–Ω–Ω–∞ - –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç" class="footer__chatbot-message-avatar-img">
                </div>
                <div class="footer__chatbot-message-content">
                    <p class="typewriter-text"></p>
                    <span class="footer__chatbot-message-time">${timeString}</span>
                </div>
            `;
            
            chatbotMessages.appendChild(messageDiv);
            chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
            
            const textElement = messageDiv.querySelector('.typewriter-text');
            let index = 0;
            
            // –§—É–Ω–∫—Ü–∏—è –ø–µ—á–∞—Ç–∞–Ω–∏—è –ø–æ —Å–∏–º–≤–æ–ª–∞–º
            function typeNextChar() {
                if (index < text.length) {
                    textElement.innerHTML += text.charAt(index);
                    index++;
                    chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
                    setTimeout(typeNextChar, typingSpeed);
                }
            }
            
            // –ù–∞—á–∏–Ω–∞–µ–º –ø–µ—á–∞—Ç–∞–Ω–∏–µ
            typeNextChar();
        }

        // –ü–æ–∫–∞–∑/—Å–∫—Ä—ã—Ç–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ "–ø–µ—á–∞—Ç–∞–µ—Ç"
        function showTyping() {
            if (chatbotTyping) {
                chatbotTyping.style.display = 'flex';
                chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
            }
        }

        function hideTyping() {
            if (chatbotTyping) {
                chatbotTyping.style.display = 'none';
            }
        }

        // –®–∞–±–ª–æ–Ω—ã –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∫–Ω–æ–ø–æ–∫
        const quickResponseTemplates = {
            '—Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å': {
                first: `üí∞ **–°—Ç–æ–∏–º–æ—Å—Ç—å —Å–º–µ—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:**

üìã **–õ–æ–∫–∞–ª—å–Ω–∞—è —Å–º–µ—Ç–∞:** –æ—Ç 500‚ÇΩ –∑–∞ –æ–±—ä–µ–∫—Ç
üè¢ **–û–±—ä–µ–∫—Ç–Ω–∞—è —Å–º–µ—Ç–∞:** –æ—Ç 2000‚ÇΩ 
üìä **–°–≤–æ–¥–Ω—ã–π —Å–º–µ—Ç–Ω—ã–π —Ä–∞—Å—á–µ—Ç:** –æ—Ç 3000‚ÇΩ
üîç **–≠–∫—Å–ø–µ—Ä—Ç–∏–∑–∞ —Å–º–µ—Ç—ã:** –æ—Ç 1000‚ÇΩ

‚ö° **–°—Ä–æ—á–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞ 24 —á–∞—Å–∞** - –¥–æ–ø–ª–∞—Ç–∞ 50%`,
                
                second: `üéØ **–î–ª—è —Ç–æ—á–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å:**
- –¢–∏–ø –æ–±—ä–µ–∫—Ç–∞ (–∂–∏–ª–æ–π/–∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π)
- –ü–ª–æ—â–∞–¥—å –∏–ª–∏ –æ–±—ä–µ–º —Ä–∞–±–æ—Ç  
- –†–µ–≥–∏–æ–Ω —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞
- –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–∞–∑–¥–µ–ª—ã —Å–º–µ—Ç—ã

üìû –ó–≤–æ–Ω–∏—Ç–µ **8 (800) 300-87-72** –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞!`
            },

            '—ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞': {
                first: `üîç **–≠–∫—Å–ø–µ—Ä—Ç–∏–∑–∞ —Å–º–µ—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏** - –Ω–∞—à–∞ –æ—Å–Ω–æ–≤–Ω–∞—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è!

‚úÖ **–ß—Ç–æ –º—ã –ø—Ä–æ–≤–µ—Ä—è–µ–º:**
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ä–∞—Å—Ü–µ–Ω–æ–∫ –§–°–ù–ë-2022
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –æ–±—ä–µ–º–∞–º —Ä–∞–±–æ—Ç –ø—Ä–æ–µ–∫—Ç—É
- –û–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –∑–∞—Ç—Ä–∞—Ç
- –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–π –±–∞–∑—ã`,
                
                second: `üí° **–†–µ–∑—É–ª—å—Ç–∞—Ç —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã:**
- –ü–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á–µ—Ç —Å –≤—ã—è–≤–ª–µ–Ω–Ω—ã–º–∏ –æ—à–∏–±–∫–∞–º–∏
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å—Ç–æ–∏–º–æ—Å—Ç–∏
- –≠–∫–æ–Ω–æ–º–∏—è –¥–æ 15-20% –æ—Ç –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ–π —Å—É–º–º—ã

üìã –ü—Ä–∏—à–ª–∏—Ç–µ –≤–∞—à—É —Å–º–µ—Ç—É –Ω–∞ **mail@expertsmet.ru** –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞!`
            },

            '—Å—Ä–æ–∫–∏': {
                first: `‚è∞ **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å—Ä–æ–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç:**

üìã –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–º–µ—Ç–∞: **1-2 —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è**
üè¢ –û–±—ä–µ–∫—Ç–Ω–∞—è —Å–º–µ—Ç–∞: **3-5 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π**  
üîç –≠–∫—Å–ø–µ—Ä—Ç–∏–∑–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏: **2-3 —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è**
üìä –°–≤–æ–¥–Ω—ã–π —Ä–∞—Å—á–µ—Ç: **5-7 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π**`,
                
                second: `üöÄ **–°—Ä–æ—á–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:**
‚ö° –ó–∞ 24 —á–∞—Å–∞ - –¥–æ–ø–ª–∞—Ç–∞ 50%
üí® –ó–∞ 12 —á–∞—Å–æ–≤ - –¥–æ–ø–ª–∞—Ç–∞ 100%

üìÖ –¢–æ—á–Ω—ã–µ —Å—Ä–æ–∫–∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –æ–±—ä–µ–º–∞ –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞. –ö–æ–≥–¥–∞ –≤–∞–º –Ω—É–∂–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç?`
            },

            '–º–µ–Ω–µ–¥–∂–µ—Ä': {
                first: `üìû **–°–≤—è–∑—å —Å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º:**

üë©‚Äçüíº **–ï–ª–µ–Ω–∞** - –≤–µ–¥—É—â–∏–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç
üì± –ü–µ—Ä–µ–∑–≤–æ–Ω–∏—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ **3-5 –º–∏–Ω—É—Ç**
‚≠ê –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã —Å–æ —Å–º–µ—Ç–∞–º–∏ –±–æ–ª–µ–µ 8 –ª–µ—Ç`,
                
                second: `‚úÖ **–ï–ª–µ–Ω–∞ –ø–æ–º–æ–∂–µ—Ç —Å:**
- –î–µ—Ç–∞–ª—å–Ω—ã–º –æ–±—Å—É–∂–¥–µ–Ω–∏–µ–º –≤–∞—à–µ–π –∑–∞–¥–∞—á–∏
- –¢–æ—á–Ω—ã–º —Ä–∞—Å—á–µ—Ç–æ–º —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —É—Å–ª—É–≥
- –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ–º —É–¥–æ–±–Ω—ã—Ö —Å—Ä–æ–∫–æ–≤
- –û—Ç–≤–µ—Ç–∞–º–∏ –Ω–∞ –≤—Å–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã

üì± **–û—Å—Ç–∞–≤—å—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞** –∏–ª–∏ –∑–≤–æ–Ω–∏—Ç–µ: **8 (800) 300-87-72**`
            }
        };

        // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ –ò–ò API
        function sendMessageToAI(text) {
            if (awaitingAIResponse || isTyping) return;
            
            awaitingAIResponse = true;
            showTyping();
            
            const payload = {
                chatInput: text,
                uid: clientUid
            };
            if (sessionId) payload.session_id = sessionId;
          
            fetch("https://cloudberg.su/webhook/2bd759eb-d8b5-4c1a-a9aa-f348b14cd90b/chat", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(payload)
            })
            .then(r => {
                if (!r.ok) throw new Error(`–ö–æ–¥ ${r.status}`);
                return r.json();
            })
            .then(data => {
                if (!sessionId && data.session_id) {
                    sessionId = data.session_id;
                }
                
                if (data.reply) {
                    hideTyping();
                    addMessageWithTypewriter(data.reply, false);
                }
            })
            .catch(error => {
                console.error('–û—à–∏–±–∫–∞ API:', error);
                hideTyping();
                addMessageWithTypewriter(`–ò–∑–≤–∏–Ω–∏—Ç–µ, –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤–∞—à–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ –∏–ª–∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É 8 (800) 300-87-72.`, false);
            })
            .finally(() => {
                awaitingAIResponse = false;
            });
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∫–Ω–æ–ø–æ–∫
        function getTemplateResponse(messageKey) {
            const template = quickResponseTemplates[messageKey];
            if (template) {
                return {
                    first: template.first,
                    second: template.second
                };
            }
            
            return {
                first: `–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à –∏–Ω—Ç–µ—Ä–µ—Å –∫ "${messageKey}"! ü§î`,
                second: `üìû **–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:**
- –¢–µ–ª–µ—Ñ–æ–Ω: **8 (800) 300-87-72**
- Email: **mail@expertsmet.ru**
- Telegram: **@expertsmet**

‚è∞ –†–∞–±–æ—Ç–∞–µ–º –µ–∂–µ–¥–Ω–µ–≤–Ω–æ —Å 9:00 –¥–æ 21:00`
            };
        }

        // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
        function sendMessage(messageText = null, isQuickReply = false) {
            if (isTyping || awaitingAIResponse) return;
            
            const text = messageText || (chatbotInput ? chatbotInput.value.trim() : '');
            if (!text) return;

            userInteracted = true;
            
            // –°–∫—Ä—ã–≤–∞–µ–º –±—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
            const quickReplies = document.getElementById('chatbotQuickReplies');
            if (quickReplies) {
                quickReplies.style.display = 'none';
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            addMessage(text, true);
            if (chatbotInput) {
                chatbotInput.value = '';
            }

            if (isQuickReply) {
                // –î–õ–Ø –ë–´–°–¢–†–´–• –û–¢–í–ï–¢–û–í - —Ç–æ–ª—å–∫–æ —à–∞–±–ª–æ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã, –ë–ï–ó –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ API
                const lowerMessage = text.toLowerCase();
                let responseKey = 'default';
                
                if (lowerMessage.includes('—Å—Ç–æ–∏–º–æ—Å—Ç—å')) responseKey = '—Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å';
                else if (lowerMessage.includes('—ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞')) responseKey = '—ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞';
                else if (lowerMessage.includes('—Å—Ä–æ–∫–∏')) responseKey = '—Å—Ä–æ–∫–∏';
                else if (lowerMessage.includes('–º–µ–Ω–µ–¥–∂–µ—Ä')) responseKey = '–º–µ–Ω–µ–¥–∂–µ—Ä';
                
                const templateResponse = getTemplateResponse(responseKey);
                
                setTimeout(() => {
                    addMessageWithTypewriter(templateResponse.first, false);
                    
                    setTimeout(() => {
                        addMessageWithTypewriter(templateResponse.second, false);
                    }, 6000);
                }, 2000);
                
            } else {
                // –î–õ–Ø –ü–ï–ß–ê–¢–ù–´–• –°–û–û–ë–©–ï–ù–ò–ô - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ API
                sendMessageToAI(text);
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        if (chatbotButton) {
            chatbotButton.addEventListener('click', function(e) {
                e.preventDefault();
                userInteracted = true;
                toggleChatbot('open');
            });
        }

        if (closeChatbotModal) {
            closeChatbotModal.addEventListener('click', function() {
                toggleChatbot('close');
            });
        }

        if (chatbotSend && chatbotInput) {
            chatbotSend.addEventListener('click', () => sendMessage());
            
            chatbotInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
        }

        // –ë—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã - –¢–û–õ–¨–ö–û –®–ê–ë–õ–û–ù–´
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('footer__chatbot-quick-reply')) {
                userInteracted = true;
                const message = e.target.getAttribute('data-message');
                sendMessage(message, true); // isQuickReply = true - —Ç–æ–ª—å–∫–æ —à–∞–±–ª–æ–Ω
            }
        });

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
        document.addEventListener('click', function(e) {
            if (e.target === chatbotModal) {
                toggleChatbot('close');
            }
        });

        // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        document.addEventListener('click', function() {
            if (!userInteracted) {
                userInteracted = true;
                if (chatbotButton) {
                    chatbotButton.classList.remove('attention');
                }
            }
        });

        // –ó–ê–ü–£–°–ö –°–ò–°–¢–ï–ú–´ –ß–ê–¢–ë–û–¢–ê

        console.log('ü§ñ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–∞—Ç-–±–æ—Ç–∞ EXPERTsmet...');

        // –ü–æ–∫–∞–∑ –∫–Ω–æ–ø–∫–∏ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
        setTimeout(() => {
            showChatbotButton();
            console.log('‚úÖ –ö–Ω–æ–ø–∫–∞ —á–∞—Ç-–±–æ—Ç–∞ –ø–æ–∫–∞–∑–∞–Ω–∞');
        }, 10000);

        // –ê–≤—Ç–æ–æ—Ç–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ 25 —Å–µ–∫—É–Ω–¥
        setTimeout(() => {
            autoOpenChatbot();
            console.log('üöÄ –ê–≤—Ç–æ–æ—Ç–∫—Ä—ã—Ç–∏–µ —á–∞—Ç-–±–æ—Ç–∞');
        }, 30000);

        console.log('üéØ –ß–∞—Ç-–±–æ—Ç EXPERTsmet –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!');
    });
</script>
