<section class="hero">
    <div style="height: 100%; display: flex; position: relative;">
        <!-- Слайдер -->
        <div class="slideshow is-loaded" id="js-header" style="flex: 1;">
            <!-- Слайд 1 -->
            <div class="slideshow__slide js-slider-home-slide is-current" data-slide="1">
                <div class="slideshow__slide-background-parallax background-absolute">
                    <div class="slideshow__slide-background-load-wrap background-absolute">
                        <div class="slideshow__slide-background-load background-absolute">
                            <div class="slideshow__slide-background-wrap background-absolute">
                                <div class="slideshow__slide-background background-absolute">
                                    <div class="slideshow__slide-image-wrap background-absolute">
                                        <div class="slideshow__slide-image background-absolute"
                                            style="background-image: url('https://expertsmet.ru/static/main/img/hero_22.webp');">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="slideshow__slide-caption">
                    <div class="slideshow__slide-caption-text">
                        <div class="container">
                            <div class="hero__inner">
                                <div class="hero__content">
                                    <h1 class="slide__title">Услуги по составлению сметной документации</h1>
                                    <div class="slide__features">
                                        <div class="feature-item">Локальные сметы базисно-индексным методом</div>
                                        <div class="feature-item">Ресурсно-индексный метод расчета</div>
                                        <div class="feature-item">Соответствие ФСНБ-2022</div>
                                        <div class="feature-item">Корректировка в связи с изменениями в ПД/РД</div>
                                    </div>
                                    <a href="#calculator" class="slide__button">Подробнее</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Слайд 2 -->
            <div class="slideshow__slide js-slider-home-slide is-next" data-slide="2">
                <div class="slideshow__slide-background-parallax background-absolute">
                    <div class="slideshow__slide-background-load-wrap background-absolute">
                        <div class="slideshow__slide-background-load background-absolute">
                            <div class="slideshow__slide-background-wrap background-absolute">
                                <div class="slideshow__slide-background background-absolute">
                                    <div class="slideshow__slide-image-wrap background-absolute">
                                        <div class="slideshow__slide-image background-absolute"
                                            style="background-image: url('https://expertsmet.ru/static/main/img/shero_2.jpeg');">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="slideshow__slide-caption">
                    <div class="slideshow__slide-caption-text">
                        <div class="container">
                            <div class="hero__inner">
                                <div class="hero__content">
                                    <h1 class="slide__title">Услуги по разработке строительной документации</h1>
                                    <div class="slide__features">
                                        <div class="feature-item">Составление ведомости объемов работ</div>
                                        <div class="feature-item">Подготовка исполнительной документации</div>
                                        <div class="feature-item">Оформление актов КС-2, КС-3, КС-6</div>
                                        <div class="feature-item">Соответствие нормативам и стандартам РФ</div>
                                    </div>
                                    <a href="#calculator" class="slide__button">Подробнее</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Слайд 3 -->
            <div class="slideshow__slide js-slider-home-slide is-prev" data-slide="3">
                <div class="slideshow__slide-background-parallax background-absolute">
                    <div class="slideshow__slide-background-load-wrap background-absolute">
                        <div class="slideshow__slide-background-load background-absolute">
                            <div class="slideshow__slide-background-wrap background-absolute">
                                <div class="slideshow__slide-background background-absolute">
                                    <div class="slideshow__slide-image-wrap background-absolute">
                                        <div class="slideshow__slide-image background-absolute"
                                            style="background-image: url('https://expertsmet.ru/static/main/img/shero_3.jpeg');">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="slideshow__slide-caption">
                    <div class="slideshow__slide-caption-text">
                        <div class="container">
                            <div class="hero__inner">
                                <div class="hero__content">
                                    <h1 class="slide__title">Услуги по сметному сопровождению и экспертизе</h1>
                                    <div class="slide__features">
                                        <div class="feature-item">Сопровождение при прохождении экспертизы</div>
                                        <div class="feature-item">Разработка конъюнктурного анализа</div>
                                        <div class="feature-item">Сметный аутсорс для вашей компании</div>
                                        <div class="feature-item">Защита интересов заказчика</div>
                                    </div>
                                    <a href="#calculator" class="slide__button">Подробнее</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Единая навигация слайдера -->
            <div class="slideshow__navigation">
                <div class="slideshow__arrow js-slider-home-prev" id="prev-slide">
                    <svg class="arrow-icon" viewBox="0 0 18 18">
                        <path d="M14,0.7L13.3,0L4.7,8.3l0,0L4,9l0,0l0.7,0.7l0,0l8.5,8.3l0.7-0.7L5.4,9L14,0.7z" />
                    </svg>
                </div>
                
                <div class="slideshow__indicators">
                    <div class="slideshow__indicator is-active" data-slide="0"></div>
                    <div class="slideshow__indicator" data-slide="1"></div>
                    <div class="slideshow__indicator" data-slide="2"></div>
                </div>
                
                <div class="slideshow__arrow js-slider-home-next" id="next-slide">
                    <svg class="arrow-icon" viewBox="0 0 18 18">
                        <path d="M12.6,9L4,17.3L4.7,18l8.5-8.3l0,0L14,9l0,0l-0.7-0.7l0,0L4.7,0L4,0.7L12.6,9z" />
                    </svg>
                </div>
            </div>

            <!-- Полоска прогресса слайдера -->
            <div class="slideshow__progress">
                <div class="slideshow__progress-bar" id="slide-progress-bar"></div>
            </div>
        </div>
        
        <!-- Фиксированная форма обратной связи -->
        <div class="hero__form-container" style="position: absolute; right: 80px; top: 50%; transform: translateY(-50%); width: 400px; z-index: 100;">
            <div class="contact-form">
                <h2 class="form-title">Получите <span class="form-highlight">бесплатную</span>
                    консультацию эксперта</h2>
                <p class="form-subtitle">Ответим на все вопросы и рассчитаем стоимость услуг</p>

                <form id="contact-form">
                    <div class="form-group">
                        <input type="text" class="form-input" placeholder="Ваше имя" required>
                    </div>
                    <div class="form-group">
                        <input type="tel" class="form-input" placeholder="Номер телефона" required>
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-input" placeholder="Название компании">
                    </div>
                    <button type="submit" class="form-button">Получить консультацию</button>
                    <p class="form-privacy">
                        Нажимая на кнопку, вы соглашаетесь с <a href="#">политикой обработки персональных данных</a>
                    </p>
                </form>
            </div>
        </div>
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Слайдер
        let slideIndex = 0;
        const slides = document.querySelectorAll('.js-slider-home-slide');
        const indicators = document.querySelectorAll('.slideshow__indicator');
        const prevBtn = document.querySelector('.js-slider-home-prev');
        const nextBtn = document.querySelector('.js-slider-home-next');
        const progressBar = document.getElementById('slide-progress-bar');
        
        // Увеличенное время между слайдами (10 секунд)
        const slideTime = 10000;
        
        // Текущее время анимации
        let slideTimer = 0;
        
        let slideInterval;
        let progressInterval;

        // Установка класса активности для индикаторов
        function setActiveIndicator(index) {
            indicators.forEach(indicator => indicator.classList.remove('is-active'));
            indicators[index].classList.add('is-active');
        }
        
        // Запуск прогресс-бара
        function startProgressBar() {
            // Сбрасываем прогресс
            slideTimer = 0;
            progressBar.style.width = '0%';
            
            // Останавливаем предыдущий интервал, если он был
            if (progressInterval) {
                clearInterval(progressInterval);
            }
            
            // Запускаем интервал обновления прогресс-бара
            progressInterval = setInterval(() => {
                slideTimer += 50; // Обновляем каждые 50мс
                const percentage = (slideTimer / slideTime) * 100;
                progressBar.style.width = `${percentage}%`;
                
                // Если время истекло, останавливаем
                if (slideTimer >= slideTime) {
                    clearInterval(progressInterval);
                }
            }, 50);
        }

        // Функция смены слайдов
        function showSlide(n) {
            slideIndex = n;
            
            // Обеспечиваем последовательное переключение
            if (slideIndex >= slides.length) slideIndex = 0;
            if (slideIndex < 0) slideIndex = slides.length - 1;

            // Убираем все классы состояния
            slides.forEach(slide => {
                slide.classList.remove('is-current', 'is-next', 'is-prev');
            });

            // Устанавливаем классы для текущего, следующего и предыдущего слайдов
            slides[slideIndex].classList.add('is-current');
            
            // Следующий слайд (всегда по порядку)
            let nextIndex = (slideIndex + 1) % slides.length;
            slides[nextIndex].classList.add('is-next');
            
            // Предыдущий слайд (всегда по порядку)
            let prevIndex = (slideIndex + slides.length - 1) % slides.length;
            slides[prevIndex].classList.add('is-prev');

            // Обновляем индикаторы
            setActiveIndicator(slideIndex);
            
            // Запускаем прогресс-бар
            startProgressBar();
        }

        // Инициализация слайдера
        function initSlider() {
            showSlide(0);

            // Обработчики для кнопок слайдера
            prevBtn.addEventListener('click', () => {
                showSlide(slideIndex - 1);
                resetInterval();
            });

            nextBtn.addEventListener('click', () => {
                showSlide(slideIndex + 1);
                resetInterval();
            });

            // Обработчики для индикаторов
            indicators.forEach((indicator, index) => {
                indicator.addEventListener('click', () => {
                    showSlide(index);
                    resetInterval();
                });
            });

            // Автоматическая смена слайдов
            startInterval();
        }

        // Функции для автоматической смены слайдов
        function startInterval() {
            slideInterval = setInterval(() => {
                // Переключаем на следующий слайд последовательно
                showSlide(slideIndex + 1);
            }, slideTime);
        }

        function resetInterval() {
            clearInterval(slideInterval);
            startInterval();
        }

        // Инициализация слайдера
        initSlider();

        // Обработка форм
        const form = document.getElementById('contact-form');
        form.addEventListener('submit', function (e) {
            e.preventDefault();
            alert('Ваша заявка успешно отправлена! Мы свяжемся с вами в ближайшее время.');
            form.reset();
        });
    });
</script>