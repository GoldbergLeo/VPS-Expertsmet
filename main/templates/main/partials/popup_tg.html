{% load static %}
<style>
    /* –°—Ç–∏–ª–∏ –¥–ª—è –ø–æ–ø–∞–ø–∞ Telegram */
    /* Overlay –¥–ª—è –∑–∞—Ç–µ–º–Ω–µ–Ω–∏—è —Ñ–æ–Ω–∞ */
    .telegram-popup-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 9998;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.4s ease, visibility 0.4s ease;
    }
    
    .telegram-popup-overlay.active {
        opacity: 1;
        visibility: visible;
    }
    
    /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
    .telegram-popup {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.9);
        width: 90%;
        max-width: 500px;
        background-color: #fff;
        border-radius: 12px;
        box-shadow: 0 15px 50px rgba(0, 0, 0, 0.3);
        z-index: 9999;
        overflow: hidden;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.4s ease, transform 0.4s ease, visibility 0.4s ease;
    }
    
    .telegram-popup.active {
        opacity: 1;
        visibility: visible;
        transform: translate(-50%, -50%) scale(1);
    }
    
    /* –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è */
    .popup-close {
        position: absolute;
        top: 16px;
        right: 16px;
        width: 24px;
        height: 24px;
        cursor: pointer;
        z-index: 10;
        transition: transform 0.3s ease;
    }
    
    .popup-close:hover {
        transform: rotate(90deg);
    }
    
    .popup-close::before,
    .popup-close::after {
        content: '';
        position: absolute;
        width: 18px;
        height: 2px;
        background-color: #333;
        top: 50%;
        left: 50%;
    }
    
    .popup-close::before {
        transform: translate(-50%, -50%) rotate(45deg);
    }
    
    .popup-close::after {
        transform: translate(-50%, -50%) rotate(-45deg);
    }
    
    /* –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ */
    .popup-image-container {
        text-align: center;
        padding: 20px 20px 0;
        background-color: #fff;
    }
    
    .popup-image {
        max-width: 200px;
        height: auto;
        border-radius: 5px;
    }
    
    /* –ö–æ–Ω—Ç–µ–Ω—Ç */
    .popup-content {
        padding: 20px 30px 30px;
        text-align: center;
    }
    
    .popup-title {
        font-size: 20px;
        font-weight: 700;
        color: #1A1C1F;
        margin-bottom: 15px;
        line-height: 1.3;
    }
    
    .popup-subtitle {
        font-size: 15px;
        color: #596780;
        margin-bottom: 20px;
        line-height: 1.5;
    }
    
    /* –°—á–µ—Ç—á–∏–∫ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ */
    .subscriber-count {
        display: inline-block;
        background-color: #f0f7ff;
        color: #264773;
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 13px;
        font-weight: 600;
        margin-bottom: 20px;
    }
    
    /* –ö–Ω–æ–ø–∫–∞ Telegram */
    .telegram-button {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        padding: 16px 25px;
        background-color: #24292e;
        color: #fff;
        text-decoration: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 600;
        transition: background-color 0.3s;
        border: none;
        cursor: pointer;
        width: 100%;
        box-shadow: 0 4px 12px rgba(36, 41, 46, 0.2);
    }
    
    .telegram-button:hover {
        background-color: #1c2024;
        transform: translateY(-2px);
        box-shadow: 0 6px 15px rgba(36, 41, 46, 0.3);
    }
    
    .telegram-icon {
        width: 20px;
        height: 20px;
    }
    
    /* –°–æ–æ–±—â–µ–Ω–∏–µ –æ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ */
    .privacy-note {
        font-size: 12px;
        color: #8a94a6;
        margin-top: 15px;
        line-height: 1.4;
    }
    
    /* QR-–∫–æ–¥ */
    .qr-code-container {
        text-align: center;
        padding: 15px 20px;
        background-color: #f8f9fa;
        border-radius: 8px;
        margin: 15px 0;
    }
    
    .qr-code-title {
        font-size: 14px;
        color: #596780;
        margin-bottom: 10px;
        font-weight: 500;
    }
    
    .qr-code-image {
        width: 120px;
        height: 120px;
        border-radius: 8px;
        border: 2px solid #e9ecef;
        background-color: #fff;
        padding: 8px;
    }
    
    .qr-code-note {
        font-size: 11px;
        color: #8a94a6;
        margin-top: 8px;
        line-height: 1.3;
    }
    
    /* –°–∫—Ä—ã—Ç–∏–µ QR-–∫–æ–¥–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö */
    .desktop-only {
        display: block;
    }
    
    /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è –ø–ª–∞–Ω—à–µ—Ç–æ–≤ */
    @media (max-width: 768px) {
        .telegram-popup {
            max-width: 450px;
            width: 90%;
        }
        
        .popup-image {
            max-width: 180px;
        }
        
        .popup-title {
            font-size: 19px;
        }
        
        .popup-subtitle {
            font-size: 15px;
        }
    }
    
    @media (max-width: 576px) {
        .telegram-popup {
            max-width: 320px;
            width: 95%;
        }
        
        .popup-image-container {
            padding: 15px 15px 0;
        }
        
        .popup-image {
            max-width: 150px;
        }
        
        .popup-title {
            font-size: 18px;
            margin-bottom: 12px;
        }
        
        .popup-subtitle {
            font-size: 14px;
            margin-bottom: 15px;
        }
        
        .subscriber-count {
            font-size: 12px;
            margin-bottom: 15px;
        }
        
        .telegram-button {
            font-size: 15px;
            padding: 14px 20px;
        }
        
        /* –°–∫—Ä—ã–≤–∞–µ–º QR-–∫–æ–¥ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö */
        .desktop-only {
            display: none;
        }
        
        /* –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º –æ—Ç—Å—Ç—É–ø—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ */
        .popup-content {
            padding: 15px 20px 25px;
        }
        
        .privacy-note {
            font-size: 11px;
            margin-top: 12px;
        }
    }
</style>

<!-- Overlay –¥–ª—è –∑–∞—Ç–µ–º–Ω–µ–Ω–∏—è —Ñ–æ–Ω–∞ -->
<div class="telegram-popup-overlay" id="telegramPopupOverlay"></div>

<!-- Popup –æ–∫–Ω–æ -->
<div class="telegram-popup" id="telegramPopup">
    <div class="popup-close" id="popupClose"></div>
    
    <div class="popup-image-container">
        <img src="{% static 'main/img/popup.jpeg' %}" alt="–°—Ç—Ä–æ–∏—Ç–µ–ª—å" class="popup-image">
    </div>
    
    <!-- QR-–∫–æ–¥ —Ç–æ–ª—å–∫–æ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞ -->
    <div class="qr-code-container desktop-only">
        <div class="qr-code-title">üì± –û—Ç—Å–∫–∞–Ω–∏—Ä—É–π QR-–∫–æ–¥</div>
        <img src="{% static 'main/img/qr-expertsmet.jpg' %}" alt="QR-–∫–æ–¥ –¥–ª—è Telegram" class="qr-code-image">
        <div class="qr-code-note">–ò–ª–∏ –Ω–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ</div>
    </div>
    
    <div class="popup-content">
        <h2 class="popup-title">‚ùå 90% —Å–º–µ—Ç –≤ 2024 –≥. –≤–µ—Ä–Ω—É–ª–∏ –Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É</h2>
        <p class="popup-subtitle">‚ö° –ü—Ä–æ–≤–µ—Ä—å —Å–≤–æ—é –∑–∞ 5 –º–∏–Ω ‚Äî –º–∞—Ç–µ—Ä–∏–∞–ª—ã –≤ Telegram</p>
        <div class="subscriber-count">‚è± –£–∂–µ 52 —Å–º–µ—Ç—á–∏–∫–æ–≤ –≤ –∑–∞–∫—Ä—ã—Ç–æ–º —á–∞—Ç–µ. –ú–µ—Å—Ç–∞ –µ—â—ë –µ—Å—Ç—å</div>
        <a href="https://t.me/expertsmet" class="telegram-button" target="_blank">
            <svg class="telegram-icon" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.447 1.394c-.14.141-.259.259-.374.261l.213-3.053 5.56-5.022c.24-.213-.054-.334-.373-.121l-6.869 4.326-2.96-.924c-.64-.203-.658-.64.136-.954l11.566-4.458c.538-.196 1.006.128.832.941z"/>
            </svg>
            –ü–æ–ª—É—á–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã –≤ Telegram
        </a>
        <p class="privacy-note">–ë–µ–∑ —Å–ø–∞–º–∞. –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏ –∏ –ø—Ä–∏–º–µ—Ä—ã —Å–º–µ—Ç</p>
    </div>
</div>

<script>
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –ø–æ–ø–∞–ø–∞
    function showTelegramPopup() {
        if (localStorage.getItem('telegramPopupShown') === 'true') {
            return; // –ï—Å–ª–∏ —É–∂–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏, –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–Ω–æ–≤–∞
        }
        
        const overlay = document.getElementById('telegramPopupOverlay');
        const popup = document.getElementById('telegramPopup');
        
        // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å—ã –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è
        overlay.classList.add('active');
        popup.classList.add('active');
    }
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è –ø–æ–ø–∞–ø–∞
    function hideTelegramPopup() {
        const overlay = document.getElementById('telegramPopupOverlay');
        const popup = document.getElementById('telegramPopup');
        
        // –£–¥–∞–ª—è–µ–º –∫–ª–∞—Å—Å—ã –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è
        overlay.classList.remove('active');
        popup.classList.remove('active');
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage, —á—Ç–æ–±—ã –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ø–∞–ø –ø–æ–≤—Ç–æ—Ä–Ω–æ 
        localStorage.setItem('telegramPopupShown', 'true');
    }
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —É—Ö–æ–¥–∞ —Å —Å–∞–π—Ç–∞ (mouseleave)
    function handleMouseLeave(e) {
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ø–∞–ø —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —É—Ö–æ–¥–µ —Å —Å–∞–π—Ç–∞
        showTelegramPopup();
    }
    
    // –î–æ–±–∞–≤–ª—è–µ–º —Å–ª—É—à–∞—Ç–µ–ª–∏ —Å–æ–±—ã—Ç–∏–π
    document.addEventListener('mouseleave', handleMouseLeave);
    
    // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–ø–∞–ø–∞ –ø–æ –∫–ª–∏–∫—É –Ω–∞ –∫–Ω–æ–ø–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è
    document.getElementById('popupClose').addEventListener('click', hideTelegramPopup);
    
    // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–ø–∞–ø–∞ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –µ–≥–æ –æ–±–ª–∞—Å—Ç–∏
    document.getElementById('telegramPopupOverlay').addEventListener('click', hideTelegramPopup);
</script>
